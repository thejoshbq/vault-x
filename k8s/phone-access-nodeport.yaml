# NodePort Service for Direct Phone Access
# This bypasses Traefik ingress and exposes vault-x directly on port 30443
# Apply this to enable phone access via: http://100.99.208.102:30443

---
# NodePort Service
apiVersion: v1
kind: Service
metadata:
  name: vault-x-nodeport
  namespace: vault-x
  labels:
    app: vault-x
    access: phone
spec:
  type: NodePort
  selector:
    app: vault-x
  ports:
  - port: 3000
    targetPort: 3000
    nodePort: 30443
    protocol: TCP
    name: http

---
# Updated ConfigMap with NodePort URL in ALLOWED_ORIGINS
apiVersion: v1
kind: ConfigMap
metadata:
  name: budget-config
  namespace: vault-x
data:
  ALLOWED_ORIGINS: "https://boquiren-himalayas.nord,http://100.99.208.102:30443,http://localhost:3000"
  DATABASE_PATH: "/data/budget.db"
